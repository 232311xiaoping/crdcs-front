(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1458e8e1"],{"231d":function(e,t,r){"use strict";var a=r("c310"),o=r.n(a);o.a},"386d":function(e,t,r){"use strict";var a=r("cb7c"),o=r("83a1"),s=r("5f1b");r("214f")("search",1,(function(e,t,r,i){return[function(r){var a=e(this),o=void 0==r?void 0:r[t];return void 0!==o?o.call(r,a):new RegExp(r)[t](String(a))},function(e){var t=i(r,e,this);if(t.done)return t.value;var n=a(e),l=String(this),d=n.lastIndex;o(d,0)||(n.lastIndex=0);var c=s(n,l);return o(n.lastIndex,d)||(n.lastIndex=d),null===c?-1:c.index}]}))},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},9419:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-manage"},[r("Tabs",{on:{"on-click":e.queryUserByPagination}},[r("TabPane",{attrs:{label:"用户管理",icon:"ios-people"}},[r("content-header",[r("Row",{attrs:{slot:"contentHeaderLeft"},slot:"contentHeaderLeft"},[r("Col",{attrs:{span:"5"}},[r("Input",{attrs:{placeholder:"按邮箱账号查找...",clearable:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),r("Col",{attrs:{span:"6"}},[r("Input",{attrs:{placeholder:"按ID批量查询,逗号分隔...",clearable:""},model:{value:e.userIdArray,callback:function(t){e.userIdArray=t},expression:"userIdArray"}})],1),r("Col",{attrs:{span:"6"}},[r("datePicker",{staticStyle:{width:"180px"},attrs:{type:"daterange",placement:"bottom-start",placeholder:"按注册时间查找..."},model:{value:e.registerDate,callback:function(t){e.registerDate=t},expression:"registerDate"}})],1),r("Col",{attrs:{span:"5"}},[r("Button",{attrs:{type:"primary",icon:"ios-search",loading:e.isSearching},on:{click:e.search}}),r("Button",{attrs:{type:"warning"},on:{click:e.handleReset}},[e._v("重置")])],1)],1),r("div",{attrs:{slot:"contentHeaderRight"},slot:"contentHeaderRight"},[r("Button",{attrs:{type:"primary"},on:{click:e.handleUserAdd}},[e._v("添加")]),r("Button",{attrs:{type:"primary"},on:{click:e.handleUserExport}},[e._v("导出")])],1)],1),r("content-container",[r("Table",{ref:"selection",attrs:{height:"360",border:"",columns:e.columns,data:e.userList}}),r("user-add",{attrs:{modalShow:e.showModelAdd},on:{reloadData:e.queryUserByPagination,editClose:e.modelCancel}}),r("user-edit",{attrs:{modalShow:e.showModelEdit,userId:e.userId},on:{reloadData:e.queryUserByPagination,editClose:e.modelCancel}})],1),r("content-footer",{attrs:{total:e.total,pageNum:e.pageNum,pageSize:e.pageSize}})],1),r("TabPane",{attrs:{label:"用户导入",icon:"ios-document"}},[r("Row",{staticStyle:{background:"#eee",padding:"20px"}},[r("Col",{attrs:{span:"11"}},[r("Card",{attrs:{bordered:!1}},[r("p",{attrs:{slot:"title"},slot:"title"},[e._v("1. 请先下载并填写【导入模板】")]),r("Button",{attrs:{size:"large",type:"warning"},on:{click:e.handleUserTemplate}},[e._v("导入模板")])],1)],1),r("Col",{attrs:{span:"11",offset:"2"}},[r("Card",{attrs:{shadow:""}},[r("p",{attrs:{slot:"title"},slot:"title"},[e._v("2. 点击【选择文件】,确定无误后,再点击上传")]),r("Upload",{attrs:{"before-upload":e.handleUserExcel,action:""}},[r("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[e._v("选择文件")])],1),null!==e.userExcel?r("div",[e._v("文件名: "+e._s(e.userExcel.name)+" "),r("Button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handleUserExcelUpload}},[e._v(e._s(e.loading?"上传中...":"请点击上传"))])],1):e._e()],1)],1)],1)],1)],1)],1)},o=[],s=(r("8e6e"),r("ac6a"),r("456d"),r("386d"),r("bd86")),i=r("2f62"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-add"},[r("custom-modal",{attrs:{title:e.modalTips,modalShow:e.showModelAdd},on:{modalRemove:e.modalRemove,cancel:e.modalCancel,confirm:e.modalConfirm}},[r("Form",{ref:"userAdd",attrs:{model:e.dataForm,rules:e.dataRules,"label-position":"top"}},[r("FormItem",{attrs:{label:"邮箱账号:",prop:"email"}},[r("Input",{attrs:{clearable:!0},model:{value:e.dataForm.email,callback:function(t){e.$set(e.dataForm,"email",t)},expression:"dataForm.email"}})],1),r("FormItem",{attrs:{label:"昵称:",prop:"name"}},[r("Input",{attrs:{clearable:""},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),r("FormItem",{attrs:{label:"密码:",prop:"password"}},[r("Input",{attrs:{type:"password",clearable:""},model:{value:e.dataForm.password,callback:function(t){e.$set(e.dataForm,"password",t)},expression:"dataForm.password"}})],1),r("FormItem",{attrs:{label:"确认密码:",prop:"checkPassword"}},[r("Input",{attrs:{type:"password",clearable:""},model:{value:e.dataForm.checkPassword,callback:function(t){e.$set(e.dataForm,"checkPassword",t)},expression:"dataForm.checkPassword"}})],1),r("FormItem",{attrs:{label:"年龄:",prop:"age"}},[r("Input",{attrs:{clearable:""},model:{value:e.dataForm.age,callback:function(t){e.$set(e.dataForm,"age",t)},expression:"dataForm.age"}})],1),r("FormItem",{attrs:{label:"性别:",prop:"sex"}},[r("RadioGroup",{model:{value:e.dataForm.sex,callback:function(t){e.$set(e.dataForm,"sex",t)},expression:"dataForm.sex"}},[r("Radio",{attrs:{label:"1"}},[e._v("男")]),r("Radio",{attrs:{label:"0"}},[e._v("女")])],1)],1),r("FormItem",{attrs:{label:"状态:",prop:"removed"}},[r("RadioGroup",{model:{value:e.dataForm.removed,callback:function(t){e.$set(e.dataForm,"removed",t)},expression:"dataForm.removed"}},[r("Radio",{attrs:{label:"1"}},[e._v("禁用")]),r("Radio",{attrs:{label:"0"}},[e._v("启用")])],1)],1)],1)],1)],1)},l=[];r("7f7f");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u={name:"UserAdd",data:function(){var e=this,t=function(t,r,a){""===r?a(new Error("请输入密码")):(""!==e.dataForm.checkPassword&&e.$refs.userAdd.validateField("checkPassword"),a())},r=function(t,r,a){""===r?a(new Error("请再次输入密码")):r!==e.dataForm.password?a(new Error("两次输入密码不匹配!")):a()};return{showModelAdd:!1,loading:!1,albumId:"",dataForm:{email:"",name:"",password:"",checkPassword:"",age:"",sex:"",removed:""},dataRules:{email:[{required:!0,validator:this.$validate.checkEmail(),trigger:"blur"}],name:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],password:[{required:!0,validator:t,trigger:"blur"}],checkPassword:[{required:!0,trigger:"blur",validator:r}],age:[{required:!0,validator:this.$validate.checkNumber("年龄不能为空","年龄应为正整数"),trigger:"blur"}],sex:[{required:!0,validator:this.$validate.checkNumber("请选择性别"),trigger:"blur"}],removed:[{required:!0,validator:this.$validate.checkNumber("请选择用户状态"),trigger:"blur"}]},modalTips:"添加用户"}},methods:c({},Object(i["b"])(["addUser"]),{modalCancel:function(){console.log("点击了取消"),this.showModelAdd=!1},modalConfirm:function(){var e=this;console.log("点击了确定"),this.$refs.userAdd.validate((function(t){t?e.addUser({email:e.dataForm.email,name:e.dataForm.name,password:e.dataForm.password,sex:e.dataForm.sex,age:e.dataForm.age,removed:e.dataForm.removed}).then((function(t){console.log(t),1===t.status?(e.$Notice.success({title:"成功",desc:t.msg}),e.$emit("reloadData"),e.showModelAdd=!1):e.$Notice.error({title:"错误",desc:t.msg})})).catch((function(t){e.$Notice.error({title:"错误",desc:"网络连接错误"}),console.log(t)})):e.$Notice.error({title:"错误",desc:"请通过数据验证"})}))},modalRemove:function(){this.$refs.userAdd.resetFields(),this.$emit("editClose")}}),props:{modalShow:Boolean},watch:{modalShow:function(e){this.showModelAdd=e}}},m=u,h=r("2877"),p=Object(h["a"])(m,n,l,!1,null,null,null),g=p.exports,f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-edit"},[r("custom-modal",{attrs:{title:e.modalTips,modalShow:e.showModelEdit},on:{modalRemove:e.modalRemove,cancel:e.modalCancel,confirm:e.modalConfirm}},[r("Button",{staticClass:"float-right edit-top",attrs:{shape:"circle",type:"primary",icon:"ios-create-outline",size:"small"}}),r("Form",{ref:"userEdit",attrs:{model:e.dataForm,rules:e.dataRules,"label-position":"top"}},[r("FormItem",{attrs:{label:"邮箱账号:"}},[r("Input",{attrs:{disabled:""},model:{value:e.dataForm.email,callback:function(t){e.$set(e.dataForm,"email",t)},expression:"dataForm.email"}})],1),r("FormItem",{attrs:{label:"昵称:",prop:"name"}},[r("Input",{attrs:{clearable:""},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),r("FormItem",{attrs:{label:"年龄:",prop:"age"}},[r("Input",{attrs:{clearable:""},model:{value:e.dataForm.age,callback:function(t){e.$set(e.dataForm,"age",t)},expression:"dataForm.age"}})],1),r("FormItem",{attrs:{label:"性别:",prop:"sex"}},[r("RadioGroup",{model:{value:e.dataForm.sex,callback:function(t){e.$set(e.dataForm,"sex",t)},expression:"dataForm.sex"}},[r("Radio",{attrs:{label:1}},[e._v("男")]),r("Radio",{attrs:{label:0}},[e._v("女")])],1)],1)],1)],1)],1)},b=[];r("c5f6");function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w={name:"UserEdit",data:function(){return{id:"",showModelEdit:!1,dataForm:{email:"",name:"",sex:"",age:""},dataRules:{name:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],age:[{required:!0,validator:this.$validate.checkNumber("年龄不能为空","年龄应为正整数"),trigger:"blur"}],sex:[{required:!0,validator:this.$validate.checkNumber("请选择性别"),trigger:"blur"}]},modalTips:"用户编辑"}},methods:y({},Object(i["b"])(["editUser","getUser"]),{handleGetUser:function(){var e=this;this.getUser({id:this.id}).then((function(t){1===t.status?(e.dataForm=t.fields,console.log("userEdit#dataForm: ",t.fields)):e.$Notice.error({title:"错误",desc:t.msg})})).catch((function(t){e.$Notice.error({title:"错误",desc:"网络连接错误"}),console.log(t)}))},modalCancel:function(){console.log("点击了取消"),this.showModelEdit=!1},modalConfirm:function(){var e=this;console.log("点击了确定"),this.$refs.userEdit.validate((function(t){t?e.editUser({id:e.id,name:e.dataForm.name,sex:e.dataForm.sex,age:e.dataForm.age}).then((function(t){console.log(t),1===t.status?(e.$Notice.success({title:"成功",desc:t.msg}),e.$emit("reloadData"),e.showModelEdit=!1):e.$Notice.error({title:"错误",desc:t.msg})})).catch((function(t){e.$Notice.error({title:"错误",desc:"网络连接错误"}),console.log(t)})):e.$Notice.error({title:"错误",desc:"请通过数据验证"})}))},modalRemove:function(){this.$refs.userEdit.resetFields(),this.$emit("editClose")}}),props:{modalShow:Boolean,userId:Number},watch:{modalShow:function(e){this.showModelEdit=e,this.id=this.userId,this.handleGetUser()}}},F=w,x=Object(h["a"])(F,f,b,!1,null,null,null),O=x.exports;r("bc3a");function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $={name:"User",components:{UserAdd:g,UserEdit:O},data:function(){var e=this;return{showModelAdd:!1,showModelEdit:!1,userExcel:null,userId:0,email:"",userIdArray:"",registerDate:"",registerStartTime:"",registerEndTime:"",isSearching:!1,total:0,pageNum:1,pageSize:50,showUserDevice:!1,deviceInfoList:[],modal_loading:!1,loading:!1,columns:[{type:"selection",width:60,align:"center"},{title:"ID",width:60,align:"center",key:"id"},{title:"邮箱账号",width:150,align:"center",key:"email"},{title:"昵称",width:90,align:"center",key:"name"},{title:"年龄",width:90,align:"center",key:"age"},{title:"性别",align:"center",width:90,key:"name",render:function(e,t){return e("div",[e("span",0!==t.row.sex?"男":"女")])}},{title:"注册时间",align:"center",key:"registerDate"},{title:"操作",key:"action",width:220,align:"center",render:function(t,r){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.handleUserEdit(r.row.id)}}},"编辑"),t("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.changeUserRemoved(r.row.id,r.row.removed)}}},0===r.row.removed?"启用":"禁用")])}}],userList:[]}},methods:E({},Object(i["b"])(["userPage","addUser","editUser","userRemoved","userExport","userImportTemplate","userImport"]),{handleReset:function(){this.email="",this.userIdArray="",this.registerDate=""},handlePage:function(e){this.pageNum=e,this.search()},search:function(){this.isSearching=!0,this.queryUserByPagination()},queryUserByPagination:function(){var e=this;this.registerStartTime="",this.registerEndTime="",""!==this.registerDate&&""!==this.registerDate[0]&&(this.registerStartTime=this.$dateFormat(this.registerDate[0],"yyyy-MM-dd")+" 00:00:00",this.registerEndTime=this.$dateFormat(this.registerDate[1],"yyyy-MM-dd")+" 00:00:00"),this.userPage({current:this.pageNum,pageSize:this.pageSize,email:this.email,userIdArray:this.userIdArray,startRegisterDate:this.registerStartTime,endRegisterDate:this.registerEndTime}).then((function(t){console.log(t),1===t.status?(e.userList=t.fields.list,e.total=t.fields.recordTotal):e.$Notice.error({title:"错误",desc:t.msg}),e.isSearching=!1})).catch((function(t){e.$Notice.error({title:"错误",desc:"网络连接错误"}),console.log(t)}))},handleUserExport:function(){var e=this;this.registerStartTime="",this.registerEndTime="",""!==this.registerDate&&""!==this.registerDate[0]&&(this.registerStartTime=this.$dateFormat(this.registerDate[0],"yyyy-MM-dd")+" 00:00:00",this.registerEndTime=this.$dateFormat(this.registerDate[1],"yyyy-MM-dd")+" 00:00:00"),this.userExport({email:this.email,userIdArray:this.userIdArray,startRegisterDate:this.registerStartTime,endRegisterDate:this.registerEndTime}).then((function(e){var t=document.createElement("a"),r=new Blob([e],{type:"application/vnd.ms-excel"});t.style.display="none",t.href=URL.createObjectURL(r);for(var a="",o=0;o<10;o++)a+=Math.ceil(10*Math.random());t.setAttribute("download","用户_"+a+".xlsx"),document.body.appendChild(t),t.click(),document.body.removeChild(t)})).catch((function(t){e.$Notice.error({title:"错误",desc:"网络连接错误"}),console.log(t)}))},modelCancel:function(){this.showModelAdd=!1,this.showModelEdit=!1},handleUserAdd:function(){this.showModelAdd=!0},handleUserEdit:function(e){this.showModelEdit=!0,this.userId=e},changeUserRemoved:function(e,t){var r=this,a=1===t?"您是否要继续启用":"您是否要继续禁用";this.$confirm({title:"上下架确认",tips:a,ok:function(){r.userRemoved({id:e,removed:1-t}).then((function(e){1===e.status?(r.$Modal.remove(),r.queryUserByPagination(),r.$Notice.success({title:"成功",desc:e.msg})):r.$Notice.error({title:"错误",desc:e.msg}),r.isSearching=!1})).catch((function(e){r.$Notice.error({title:"错误",desc:"网络连接错误"}),console.log(e)}))}})},handleUserTemplate:function(){var e=this;this.userImportTemplate().then((function(e){var t=document.createElement("a"),r=new Blob([e],{type:"application/vnd.ms-excel"});t.style.display="none",t.href=URL.createObjectURL(r),t.setAttribute("download","用户导入模板.xlsx"),document.body.appendChild(t),t.click(),document.body.removeChild(t)})).catch((function(t){e.$Notice.error({title:"错误",desc:"网络连接错误"}),console.log(t)}))},handleUserExcel:function(e){return this.userExcel=e,!1},handleUserExcelUpload:function(){var e=this;this.loading=!0;var t=new FormData;t.append("file",this.userExcel),this.userImport(t).then((function(t){e.userExcel=null,e.loading=!1,1===t.status&&e.$Notice.success({title:"成功",desc:t.msg})})).catch((function(t){e.$Notice.error({title:"错误",desc:"网络连接错误"}),console.log(t)}))}}),mounted:function(){this.search()}},I=$,j=(r("231d"),Object(h["a"])(I,a,o,!1,null,null,null));t["default"]=j.exports},c310:function(e,t,r){}}]);